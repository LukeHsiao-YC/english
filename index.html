<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªå–®å­—å†’éšª RPG</title>
    <!-- å¼•å…¥ Tailwind CSS ç”¨æ–¼æ¨£å¼ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React å’Œ Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
        body { font-family: 'Nunito', sans-serif; }
        
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- åœ–ç¤ºçµ„ä»¶ (Inline SVGs to replace Lucide imports) ---
        const Sword = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"/><line x1="13" y1="19" x2="19" y2="13"/><line x1="16" y1="16" x2="20" y2="20"/><line x1="19" y1="21" x2="21" y2="19"/></svg>;
        const RefreshCw = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>;
        const Trophy = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>;
        const BookOpen = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const Volume2 = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>;
        const Star = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>;
        const Puzzle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19.439 15.424c-1.352 0-2.585-1.079-2.585-2.424 0-1.346 1.233-2.424 2.585-2.424 1.352 0 2.415-1.078 2.415-2.424 0-1.347-1.063-2.424-2.415-2.424h-3.483a2.463 2.463 0 0 0-2.399 1.76l-.428 1.57a1.056 1.056 0 0 1-2.028 0l-.428-1.57A2.463 2.463 0 0 0 7.773 5.728H4.29C2.937 5.728 2 6.805 2 8.152c0 1.346 1.063 2.424 2.415 2.424 1.352 0 2.585 1.078 2.585 2.424 0 1.346-1.233 2.424-2.585 2.424C3.063 15.424 2 16.502 2 17.848c0 1.347 1.063 2.424 2.415 2.424h3.358a2.463 2.463 0 0 0 2.399-1.76l.428-1.57a1.056 1.056 0 0 1 2.028 0l.428 1.57a2.463 2.463 0 0 0 2.399 1.76h3.483c1.352 0 2.415-1.077 2.415-2.424 0-1.346-1.063-2.424-2.415-2.424z"/></svg>;
        const ArrowRight = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>;
        const ArrowLeft = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>;
        const RotateCw = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>;
        const AlertCircle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>;

        // --- æ ¸å¿ƒå–®å­—è³‡æ–™åº« (åŒ…å«æ‚¨æä¾›çš„æ‰€æœ‰åˆ†é¡) ---
        const rawVocabularyList = [
          // --- Numbers (æ•¸å­—) ---
          ["zero", "é›¶"], ["one", "ä¸€"], ["two", "äºŒ"], ["three", "ä¸‰"], ["four", "å››"],
          ["five", "äº”"], ["six", "å…­"], ["seven", "ä¸ƒ"], ["eight", "å…«"], ["nine", "ä¹"],
          ["ten", "å"], ["eleven", "åä¸€"], ["twelve", "åäºŒ"], ["thirteen", "åä¸‰"], ["fourteen", "åå››"],
          ["fifteen", "åäº”"], ["sixteen", "åå…­"], ["seventeen", "åä¸ƒ"], ["eighteen", "åå…«"], ["nineteen", "åä¹"],
          ["twenty", "äºŒå"], ["thirty", "ä¸‰å"], ["forty", "å››å"], ["fifty", "äº”å"], ["sixty", "å…­å"],
          ["seventy", "ä¸ƒå"], ["eighty", "å…«å"], ["ninety", "ä¹å"], ["hundred", "ç™¾"],
          // --- People (äººç‰©/ç¨±è¬‚) ---
          ["I", "æˆ‘"], ["You", "ä½ (å€‘)"], ["We", "æˆ‘å€‘"], ["They", "ä»–å€‘"],
          ["He", "ä»–"], ["him", "ä»–(å—æ ¼)"], ["She", "å¥¹"], ["It", "å®ƒ/ç‰ "],
          ["my", "æˆ‘çš„"], ["your", "ä½ çš„"], ["his", "ä»–çš„"], ["her", "å¥¹çš„"], ["its", "å®ƒçš„"],
          ["grandmother", "ç¥–æ¯/å¤–ç¥–æ¯"], ["grandfather", "ç¥–çˆ¶/å¤–ç¥–çˆ¶"], ["mother", "åª½åª½"], ["mom", "åª½åª½(å£èª)"],
          ["father", "çˆ¸çˆ¸"], ["dad", "çˆ¸çˆ¸(å£èª)"], ["sister", "å§Šå¦¹"], ["brother", "å…„å¼Ÿ"],
          ["baby", "å¬°å…’"], ["girl", "å¥³å­©"], ["boy", "ç”·å­©"], ["woman", "å¥³äºº"], ["man", "ç”·äºº"],
          ["cook", "å»šå¸«"], ["teacher", "è€å¸«"], ["student", "å­¸ç”Ÿ"], ["farmer", "è¾²å¤«"],
          ["doctor", "é†«ç”Ÿ"], ["nurse", "è­·ç†å¸«"], ["driver", "å¸æ©Ÿ"], ["friend", "æœ‹å‹"],
          // --- Body Parts (èº«é«”) ---
          ["head", "é ­"], ["hair", "é ­é«®"], ["eye", "çœ¼ç›"], ["nose", "é¼»å­"], ["mouth", "å˜´å·´"],
          ["ear", "è€³æœµ"], ["hand", "æ‰‹"], ["leg", "è…¿"], ["foot", "è…³"], ["feet", "è…³(è¤‡æ•¸)"],
          ["face", "è‡‰"],
          // --- Clothing (æœé£¾) ---
          ["hat", "å¸½å­"], ["glasses", "çœ¼é¡"], ["shirt", "è¥¯è¡«"], ["shorts", "çŸ­è¤²"],
          ["pants", "é•·è¤²"], ["skirt", "è£™å­"], ["dress", "æ´‹è£"], ["socks", "è¥ªå­"],
          ["shoes", "é‹å­"], ["boots", "é´å­"], ["jacket", "å¤¾å…‹"], ["coat", "å¤§è¡£/å¤–å¥—"],
          ["T-shirt", "é‹å‹•è¡«"],
          // --- Animals (å‹•ç‰©) ---
          ["bear", "ç†Š"], ["dog", "ç‹—"], ["cat", "è²“"], ["bird", "é³¥"], ["rabbit", "å…”å­"],
          ["frog", "é’è›™"], ["fish", "é­š"], ["chicken", "é›"], ["turtle", "çƒé¾œ"],
          ["lion", "ç…å­"], ["tiger", "è€è™"], ["monkey", "çŒ´å­"], ["giraffe", "é•·é ¸é¹¿"],
          ["fox", "ç‹ç‹¸"], ["zebra", "æ–‘é¦¬"], ["pig", "è±¬"], ["elephant", "å¤§è±¡"],
          ["ant", "èèŸ»"], ["snake", "è›‡"], ["horse", "é¦¬"],
          // --- Things (ç‰©å“) ---
          ["pen", "åŸå­ç­†"], ["pencil", "é‰›ç­†"], ["marker", "éº¥å…‹ç­†"], ["eraser", "æ©¡çš®æ“¦"],
          ["ruler", "å°º"], ["book", "æ›¸"], ["bag", "è¢‹å­/åŒ…åŒ…"], ["desk", "æ›¸æ¡Œ"],
          ["table", "é¤æ¡Œ"], ["chair", "æ¤…å­"], ["crayon", "è Ÿç­†"], ["box", "ç®±å­"],
          ["door", "é–€"], ["window", "çª—æˆ¶"], ["picture", "åœ–ç‰‡/ç…§ç‰‡"], ["TV", "é›»è¦–"],
          ["sofa", "æ²™ç™¼"], ["light", "å…‰/ç‡ˆ"], ["bed", "åºŠ"], ["lamp", "æª¯ç‡ˆ"],
          ["clock", "æ™‚é˜"], ["cell phone", "æ‰‹æ©Ÿ"], ["video game", "é›»å‹•ç©å…·"], ["computer", "é›»è…¦"],
          ["cup", "æ¯å­"], ["mug", "é¦¬å…‹æ¯"], ["bowl", "ç¢—"], ["ball", "çƒ"],
          ["yo-yo", "æºœæºœçƒ"], ["bat", "çƒæ£’"], ["robot", "æ©Ÿå™¨äºº"], ["kite", "é¢¨ç®"],
          ["doll", "å¨ƒå¨ƒ"], ["mop", "æ‹–æŠŠ"], ["map", "åœ°åœ–"], ["piano", "é‹¼ç´"],
          ["violin", "å°æç´"],
          // --- Nature & Weather (è‡ªç„¶/å¤©æ°£) ---
          ["weather", "å¤©æ°£"], ["sun", "å¤ªé™½"], ["cloud", "é›²"], ["wind", "é¢¨"],
          ["rain", "é›¨"], ["snow", "é›ª"], ["river", "æ²³"], ["flower", "èŠ±"],
          ["grass", "è‰"], ["tree", "æ¨¹"], ["sky", "å¤©ç©º"], ["season", "å­£ç¯€"],
          ["spring", "æ˜¥å¤©"], ["summer", "å¤å¤©"], ["fall", "ç§‹å¤©"], ["winter", "å†¬å¤©"],
          ["sunny", "æ™´æœ—çš„"], ["cloudy", "å¤šé›²çš„"], ["windy", "åˆ®é¢¨çš„"],
          ["rainy", "ä¸‹é›¨çš„"], ["snowy", "ä¸‹é›ªçš„"], ["warm", "æº«æš–çš„"], ["cool", "æ¶¼çˆ½çš„"],
          // --- Transport (äº¤é€š) ---
          ["bike", "è…³è¸è»Š"], ["car", "æ±½è»Š"], ["bus", "å…¬è»Š"], ["train", "ç«è»Š"],
          ["taxi", "è¨ˆç¨‹è»Š"], ["plane", "é£›æ©Ÿ"], ["boat", "èˆ¹"], ["scooter", "æ©Ÿè»Š"],
          // --- Food (é£Ÿç‰©) ---
          ["breakfast", "æ—©é¤"], ["lunch", "åˆé¤"], ["dinner", "æ™šé¤"], ["cookie", "é¤…ä¹¾"],
          ["ice cream", "å†°æ·‡æ·‹"], ["candy", "ç³–æœ"], ["hamburger", "æ¼¢å ¡"], ["hot dog", "ç†±ç‹—"],
          ["pizza", "æ¯”è–©"], ["bread", "éºµåŒ…"], ["sandwich", "ä¸‰æ˜æ²»"], ["cake", "è›‹ç³•"],
          ["rice", "é£¯"], ["noodles", "éºµ"], ["spaghetti", "ç¾©å¤§åˆ©éºµ"], ["tea", "èŒ¶"],
          ["coke", "å¯æ¨‚"], ["soda", "æ±½æ°´"], ["water", "æ°´"], ["juice", "æœæ±"],
          ["milk", "ç‰›å¥¶"], ["egg", "è›‹"], ["ham", "ç«è…¿"], ["salad", "æ²™æ‹‰"],
          ["tomato", "ç•ªèŒ„"], ["banana", "é¦™è•‰"], ["apple", "è˜‹æœ"], ["pear", "æ¢¨å­"],
          ["grape", "è‘¡è„"], ["peach", "æ¡ƒå­"], ["chicken", "é›è‚‰"], ["fish", "é­šè‚‰"],
          // --- Places (åœ°é») ---
          ["home", "å®¶"], ["school", "å­¸æ ¡"], ["park", "å…¬åœ’"], ["zoo", "å‹•ç‰©åœ’"],
          ["store", "å•†åº—"], ["shop", "å•†åº—"], ["house", "æˆ¿å­"], ["garage", "è»Šåº«"],
          ["living room", "å®¢å»³"], ["dining room", "é£¯å»³"], ["kitchen", "å»šæˆ¿"], ["bedroom", "è‡¥å®¤"],
          ["bathroom", "æµ´å®¤/å»æ‰€"], ["yard", "åº­é™¢"], ["garden", "èŠ±åœ’"], ["classroom", "æ•™å®¤"],
          ["bookstore", "æ›¸å±€"], ["library", "åœ–æ›¸é¤¨"], ["supermarket", "è¶…ç´šå¸‚å ´"], ["theater", "é›»å½±é™¢"],
          ["restaurant", "é¤å»³"], ["Taiwan", "å°ç£"], ["Japan", "æ—¥æœ¬"], ["the UK", "è‹±åœ‹"],
          ["the USA", "ç¾åœ‹"], ["Korea", "éŸ“åœ‹"],
          // --- Time (æ™‚é–“) ---
          ["o'clock", "é»é˜"], ["now", "ç¾åœ¨"], ["morning", "æ—©ä¸Š"], ["afternoon", "ä¸‹åˆ"],
          ["evening", "å‚æ™š"], ["night", "æ™šä¸Š"], ["today", "ä»Šå¤©"], ["day", "æ—¥/å¤©"],
          ["month", "æœˆä»½"], ["year", "å¹´"], ["week", "é€±"],
          ["Sunday", "æ˜ŸæœŸæ—¥"], ["Monday", "æ˜ŸæœŸä¸€"], ["Tuesday", "æ˜ŸæœŸäºŒ"], ["Wednesday", "æ˜ŸæœŸä¸‰"],
          ["Thursday", "æ˜ŸæœŸå››"], ["Friday", "æ˜ŸæœŸäº”"], ["Saturday", "æ˜ŸæœŸå…­"],
          // --- Verbs (å‹•è©) ---
          ["do", "åš"], ["like", "å–œæ­¡"], ["love", "æ„›"], ["want", "æƒ³è¦"],
          ["have", "æ“æœ‰"], ["has", "æ“æœ‰(å–®æ•¸)"], ["run", "è·‘"], ["walk", "èµ°è·¯"],
          ["swim", "æ¸¸æ³³"], ["jump", "è·³"], ["ride", "é¨"], ["dance", "è·³èˆ"],
          ["sing", "å”±æ­Œ"], ["write", "å¯«"], ["read", "é–±è®€"], ["draw", "ç•«ç•«"],
          ["color", "ä¸Šè‰²"], ["paint", "ç¹ªç•«(é¡æ–™)"], ["speak", "èªª(èªè¨€)"], ["say", "èªª"],
          ["eat", "åƒ"], ["drink", "å–"], ["look", "çœ‹(æ³¨è¦–)"], ["watch", "çœ‹(è§€çœ‹)"],
          ["see", "çœ‹(çœ‹è¦‹)"], ["listen", "è½"], ["smile", "å¾®ç¬‘"], ["laugh", "å¤§ç¬‘"],
          ["cry", "å“­"], ["hold", "æ‹¿/æ¡"], ["put", "æ”¾"], ["take", "æ‹¿å–/å¸¶"],
          ["sit", "å"], ["stand", "ç«™"], ["go", "å»"], ["come", "ä¾†"],
          ["fly", "é£›"], ["wash", "æ´—"], ["sleep", "ç¡è¦º"], ["feel", "æ„Ÿè¦º"],
          ["open", "æ‰“é–‹"], ["close", "é—œé–‰"], ["play", "ç©"],
          // --- Adjectives (å½¢å®¹è©) ---
          ["fine", "å¥½çš„/å¥åº·çš„"], ["good", "å¥½çš„"], ["bad", "å£çš„"], ["favorite", "æœ€å–œæ­¡çš„"],
          ["big", "å¤§çš„"], ["small", "å°çš„"], ["little", "å°çš„"], ["old", "è€çš„/èˆŠçš„"],
          ["young", "å¹´è¼•çš„"], ["tall", "é«˜çš„"], ["long", "é•·çš„"], ["short", "çŸ­çš„/çŸ®çš„"],
          ["thin", "ç˜¦çš„/è–„çš„"], ["fat", "èƒ–çš„"], ["fast", "å¿«çš„"], ["slow", "æ…¢çš„"],
          ["clean", "ä¹¾æ·¨çš„"], ["dirty", "é«’çš„"], ["hungry", "é¤“çš„"], ["thirsty", "æ¸´çš„"],
          ["happy", "é–‹å¿ƒçš„"], ["unhappy", "ä¸é–‹å¿ƒçš„"], ["sad", "å‚·å¿ƒçš„"], ["angry", "ç”Ÿæ°£çš„"],
          ["sick", "ç”Ÿç—…çš„"], ["tired", "ç´¯çš„"], ["hot", "ç†±çš„"], ["cold", "å†·çš„"],
          ["beautiful", "ç¾éº—çš„"], ["new", "æ–°çš„"],
          // --- Colors (é¡è‰²) ---
          ["black", "é»‘è‰²çš„"], ["white", "ç™½è‰²çš„"], ["gray", "ç°è‰²çš„"], ["brown", "æ£•è‰²çš„"],
          ["red", "ç´…è‰²çš„"], ["orange", "æ©˜è‰²çš„"], ["yellow", "é»ƒè‰²çš„"], ["green", "ç¶ è‰²çš„"],
          ["blue", "è—è‰²çš„"], ["purple", "ç´«è‰²çš„"], ["pink", "ç²‰ç´…è‰²çš„"],
          // --- Prepositions & Others (ä»‹ä¿‚è©èˆ‡å…¶ä»–) ---
          ["at", "åœ¨...åœ°é»/æ™‚åˆ»"], ["in", "åœ¨...è£¡é¢"], ["on", "åœ¨...ä¸Šé¢"], ["under", "åœ¨...ä¸‹é¢"],
          ["by", "åœ¨...æ—é‚Š(by)"], ["next to", "åœ¨...æ—é‚Š(next to)"], ["beside", "åœ¨...æ—é‚Š(beside)"],
          ["in front of", "åœ¨...å‰é¢"], ["behind", "åœ¨...å¾Œé¢"],
          ["who", "èª°"], ["what", "ä»€éº¼"], ["when", "ä½•æ™‚"], ["where", "å“ªè£¡"],
          ["which", "å“ªä¸€å€‹"], ["why", "ç‚ºä»€éº¼"], ["what time", "å¹¾é»"], ["how", "å¦‚ä½•"],
          ["how old", "å¹¾æ­²"], ["how much", "å¤šå°‘(éŒ¢/é‡)"], ["how many", "å¤šå°‘(æ•¸é‡)"],
          ["some", "ä¸€äº›"], ["much", "å¾ˆå¤š(ä¸å¯æ•¸)"], ["many", "å¾ˆå¤š(å¯æ•¸)"],
          ["English", "è‹±æ–‡"], ["Chinese", "ä¸­æ–‡"], ["Math", "æ•¸å­¸"], ["Art", "ç¾è¡“"],
          ["Science", "è‡ªç„¶ç§‘å­¸"], ["Music", "éŸ³æ¨‚"]
        ];

        // è¼”åŠ©å‡½å¼ï¼šå¾é¾å¤§çš„å–®å­—è¡¨ä¸­ç”Ÿæˆå®Œæ•´çš„éŠæˆ²ç‰©ä»¶
        const generateWordDatabase = () => {
          return rawVocabularyList.map((item, index) => ({
            id: index + 1,
            word: item[0],
            meaning: item[1],
            example: `Question: What is the meaning of '${item[0]}'?`, 
            phonetic: null 
          }));
        };

        const wordDatabase = generateWordDatabase();

        const monsterAvatars = [
          'ğŸ‘¾', 'ğŸŒ', 'ğŸ', 'ğŸ•·ï¸', 'ğŸ¦‡', 'ğŸº', 'ğŸ‘»', 'ğŸ¦', 'ğŸ‘¹', 'ğŸ²'
        ];

        function App() {
          const [gameState, setGameState] = useState('menu');
          const [gameMode, setGameMode] = useState('battle'); 
          
          const [playerHp, setPlayerHp] = useState(100);
          const [maxPlayerHp] = useState(100);
          const [score, setScore] = useState(0);
          const [combo, setCombo] = useState(0);
          
          const [monsterHp, setMonsterHp] = useState(100);
          const [maxMonsterHp] = useState(100);
          const [currentMonsterLevel, setCurrentMonsterLevel] = useState(1);
          
          const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
          const [shuffledQuestions, setShuffledQuestions] = useState([]);
          const [currentFillQuestion, setCurrentFillQuestion] = useState(null);
          
          const [currentOptions, setCurrentOptions] = useState([]);

          const [selectedOption, setSelectedOption] = useState(null);
          const [feedback, setFeedback] = useState(null);
          const [showExplanation, setShowExplanation] = useState(false);

          const [isFlipped, setIsFlipped] = useState(false);
          const [isPlayerAttacking, setIsPlayerAttacking] = useState(false);
          const [isMonsterAttacking, setIsMonsterAttacking] = useState(false);
          const [shake, setShake] = useState(false);

          useEffect(() => {
            if (gameState === 'playing_battle' || gameState === 'playing_fill') {
              const questions = [...wordDatabase].sort(() => Math.random() - 0.5);
              setShuffledQuestions(questions);
              setCurrentQuestionIndex(0);
              setPlayerHp(maxPlayerHp);
              setMonsterHp(maxMonsterHp);
              setScore(0);
              setCombo(0);
              setCurrentMonsterLevel(1);
              setFeedback(null);
              setShowExplanation(false);
              
              if (questions.length > 0) {
                if (gameState === 'playing_fill') {
                   setCurrentFillQuestion(generateFillQuestion(questions[0]));
                } else {
                   setCurrentOptions(generateBattleOptions(questions[0], wordDatabase));
                }
              }

            } else if (gameState === 'learning') {
               setCurrentQuestionIndex(0);
               setIsFlipped(false);
            }
          }, [gameState]);

          const speakWord = (text) => {
            if ('speechSynthesis' in window) {
              window.speechSynthesis.cancel();
              const utterance = new SpeechSynthesisUtterance(text);
              utterance.lang = 'en-US';
              utterance.rate = 0.8;
              window.speechSynthesis.speak(utterance);
            }
          };

          const generateBattleOptions = (correctWordData, allWords) => {
            const correctMeaning = correctWordData.meaning;
            const wrongOptions = [];
            const usedIndices = new Set([correctWordData.id]);
            
            while (wrongOptions.length < 3) {
              const randomIndex = Math.floor(Math.random() * allWords.length);
              const randomWord = allWords[randomIndex];
              
              if (!usedIndices.has(randomWord.id) && randomWord.meaning !== correctMeaning) {
                wrongOptions.push(randomWord.meaning);
                usedIndices.add(randomWord.id);
              }
            }
            return [...wrongOptions, correctMeaning].sort(() => Math.random() - 0.5);
          };

          const generateFillQuestion = (wordData) => {
            const word = wordData.word;
            const indices = word.split('').map((c, i) => i).filter(i => /[a-zA-Z]/.test(word[i]));
            
            if (indices.length === 0) return { ...wordData, maskedWord: word, targetChar: '', fillOptions: [] };

            const targetIndex = indices[Math.floor(Math.random() * indices.length)];
            const targetChar = word[targetIndex].toLowerCase(); 
            
            const maskedWord = word.substring(0, targetIndex) + '_' + word.substring(targetIndex + 1);
            
            const alphabet = 'abcdefghijklmnopqrstuvwxyz';
            let options = [targetChar];
            while(options.length < 4) {
              const char = alphabet[Math.floor(Math.random() * alphabet.length)];
              if (!options.includes(char)) options.push(char);
            }
            
            return {
              ...wordData,
              maskedWord,
              targetChar,
              fillOptions: options.sort(() => Math.random() - 0.5)
            };
          };

          const handleAnswer = (option) => {
            if (feedback !== null) return;

            setSelectedOption(option);
            
            let isCorrect = false;
            const currentQ = shuffledQuestions[currentQuestionIndex];
            
            if (gameState === 'playing_battle') {
              isCorrect = option === currentQ.meaning;
            } else if (gameState === 'playing_fill') {
              isCorrect = option === currentFillQuestion.targetChar;
            }

            if (isCorrect) {
              setFeedback('correct');
              setCombo(prev => prev + 1);
              setScore(prev => prev + (100 + (combo * 10)));
              
              setIsPlayerAttacking(true);
              setTimeout(() => setIsPlayerAttacking(false), 500);
              
              const damage = 20 + (combo * 2);
              setMonsterHp(prev => Math.max(0, prev - damage));

              setTimeout(() => {
                if (monsterHp - damage <= 0) {
                  handleMonsterDefeated();
                } else {
                  nextQuestion();
                }
              }, 1200);

            } else {
              setFeedback('wrong');
              setCombo(0);
              setShake(true);
              setTimeout(() => setShake(false), 500);

              setIsMonsterAttacking(true);
              setTimeout(() => setIsMonsterAttacking(false), 500);
              
              const damage = 25;
              setPlayerHp(prev => Math.max(0, prev - damage));
              
              setShowExplanation(true);
            }
          };

          const handleMonsterDefeated = () => {
            if (currentMonsterLevel >= monsterAvatars.length) {
              setGameState('victory');
            } else {
              setCurrentMonsterLevel(prev => prev + 1);
              setMonsterHp(maxMonsterHp + (currentMonsterLevel * 50));
              setPlayerHp(prev => Math.min(maxPlayerHp, prev + 30));
              nextQuestion();
            }
          };

          const nextQuestion = () => {
            setFeedback(null);
            setSelectedOption(null);
            setShowExplanation(false);
            
            let nextIndex = currentQuestionIndex;
            let nextQuestions = shuffledQuestions;

            if (currentQuestionIndex < shuffledQuestions.length - 1) {
              nextIndex = currentQuestionIndex + 1;
              setCurrentQuestionIndex(prev => prev + 1);
            } else {
              nextQuestions = [...wordDatabase].sort(() => Math.random() - 0.5);
              setShuffledQuestions(nextQuestions);
              setCurrentQuestionIndex(0);
              nextIndex = 0;
            }
            
            const nextQ = nextQuestions[nextIndex];
            if (gameState === 'playing_fill') {
              setCurrentFillQuestion(generateFillQuestion(nextQ));
            } else {
              setCurrentOptions(generateBattleOptions(nextQ, wordDatabase));
            }
            
            if (playerHp <= 0) {
              setGameState('gameover');
            }
          };

          const handleLearningNav = (direction) => {
            setIsFlipped(false);
            if (direction === 'next') {
                setCurrentQuestionIndex(prev => (prev + 1) % wordDatabase.length);
            } else {
                setCurrentQuestionIndex(prev => (prev - 1 + wordDatabase.length) % wordDatabase.length);
            }
          };

          const HealthBar = ({ current, max, color, label }) => (
            <div className="w-full">
              <div className="flex justify-between text-xs font-bold mb-1 text-slate-600">
                <span>{label}</span>
                <span>{Math.ceil(current)} / {max}</span>
              </div>
              <div className="h-4 bg-slate-200 rounded-full overflow-hidden border border-slate-300">
                <div 
                  className={`h-full transition-all duration-500 ease-out ${color}`}
                  style={{ width: `${(Math.max(0, current) / max) * 100}%` }}
                ></div>
              </div>
            </div>
          );

          if (gameState === 'menu') {
            return (
              <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4 font-sans text-slate-800">
                <div className="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border-b-4 border-indigo-200">
                  <div className="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <Sword className="w-10 h-10 text-indigo-600" />
                  </div>
                  <h1 className="text-3xl font-bold text-slate-800 mb-2">è‹±èªå–®å­—å¤§å†’éšª</h1>
                  <p className="text-slate-500 mb-2">æ”¶éŒ„è¶…é 300 å€‹åŸºç¤å–®å­—ï¼</p>
                  <div className="text-xs text-slate-400 mb-8 bg-slate-100 py-1 px-3 rounded-full inline-block">
                     åŒ…å«: æ•¸å­—, äººç‰©, å‹•ç‰©, é£Ÿç‰©, åœ°é»...
                  </div>
                  
                  <div className="space-y-4">
                    <button 
                      onClick={() => { setGameState('playing_battle'); setGameMode('battle'); }}
                      className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-3"
                    >
                      <Sword className="w-5 h-5" />
                      å–®å­—å°æ±º (Battle)
                    </button>
                    
                    <button 
                      onClick={() => { setGameState('playing_fill'); setGameMode('fill'); }}
                      className="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-3"
                    >
                      <Puzzle className="w-5 h-5" />
                      ç¬¦æ–‡å¡«ç©º (Spelling)
                    </button>
                    
                    <button 
                      onClick={() => setGameState('learning')}
                      className="w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 shadow-md flex items-center justify-center gap-3"
                    >
                      <BookOpen className="w-5 h-5" />
                      è¨˜æ†¶æ®¿å ‚ (Learning)
                    </button>
                  </div>
                </div>
              </div>
            );
          }

          if (gameState === 'learning') {
            const currentWord = wordDatabase[currentQuestionIndex];
            return (
                <div className="min-h-screen bg-slate-100 flex flex-col items-center justify-center p-4 font-sans">
                     <header className="absolute top-4 left-4 right-4 flex justify-between items-center">
                        <button onClick={() => setGameState('menu')} className="p-2 bg-white rounded-full shadow-sm text-slate-500 hover:bg-slate-50">
                            <ArrowLeft className="w-6 h-6" />
                        </button>
                        <h2 className="font-bold text-slate-700 text-lg flex items-center gap-2">
                            <BookOpen className="w-5 h-5" /> è¨˜æ†¶æ®¿å ‚
                        </h2>
                        <div className="w-10"></div>
                    </header>

                    <div className="perspective-1000 w-full max-w-sm h-96 cursor-pointer group" onClick={() => setIsFlipped(!isFlipped)}>
                        <div className={`relative w-full h-full transition-all duration-500 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
                            <div className="absolute w-full h-full backface-hidden bg-white rounded-2xl shadow-xl flex flex-col items-center justify-center border-b-4 border-indigo-200 p-8">
                                <span className="text-xs font-bold text-indigo-400 uppercase tracking-widest mb-4">Word Card</span>
                                <h2 className="text-4xl font-black text-slate-800 mb-4 text-center break-words w-full">{currentWord.word}</h2>
                                <button 
                                   onClick={(e) => {
                                     e.stopPropagation();
                                     speakWord(currentWord.word);
                                   }}
                                   className="bg-indigo-100 hover:bg-indigo-200 p-3 rounded-full text-indigo-600 transition-colors mb-4"
                                >
                                    <Volume2 className="w-6 h-6" />
                                </button>
                                <p className="mt-4 text-slate-400 text-sm flex items-center gap-1">
                                    <RotateCw className="w-3 h-3" /> é»æ“Šç¿»è½‰æŸ¥çœ‹æ„æ€
                                </p>
                            </div>
                            <div className="absolute w-full h-full backface-hidden bg-indigo-600 rounded-2xl shadow-xl flex flex-col items-center justify-center rotate-y-180 p-8 text-white border-b-4 border-indigo-800">
                                <h3 className="text-3xl font-bold mb-4 text-center">{currentWord.meaning}</h3>
                                <div className="w-full h-px bg-indigo-500 mb-4"></div>
                                <div className="text-left w-full bg-indigo-700/50 p-4 rounded-lg">
                                    <p className="text-indigo-200 text-xs font-bold uppercase mb-2">Practice</p>
                                    <p className="italic text-lg leading-relaxed">{currentWord.example}</p>
                                </div>
                                 <p className="mt-8 text-indigo-300 text-sm flex items-center gap-1">
                                    <RotateCw className="w-3 h-3" /> é»æ“Šç¿»è½‰å›å–®å­—
                                </p>
                            </div>
                        </div>
                    </div>

                    <div className="flex items-center gap-6 mt-8">
                        <button onClick={(e) => {e.stopPropagation(); handleLearningNav('prev')}} className="p-4 bg-white rounded-full shadow-lg text-slate-700 hover:bg-indigo-50 transition-colors">
                            <ArrowLeft className="w-6 h-6" />
                        </button>
                         <span className="font-bold text-slate-400">
                            {currentQuestionIndex + 1} / {wordDatabase.length}
                        </span>
                        <button onClick={(e) => {e.stopPropagation(); handleLearningNav('next')}} className="p-4 bg-white rounded-full shadow-lg text-slate-700 hover:bg-indigo-50 transition-colors">
                            <ArrowRight className="w-6 h-6" />
                        </button>
                    </div>
                </div>
            )
          }

          if (gameState === 'gameover' || gameState === 'victory') {
            return (
              <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4 font-sans">
                <div className="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border-b-4 border-slate-200">
                  <div className={`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${gameState === 'victory' ? 'bg-yellow-100' : 'bg-slate-100'}`}>
                    {gameState === 'victory' ? (
                      <Trophy className="w-10 h-10 text-yellow-500" />
                    ) : (
                      <RefreshCw className="w-10 h-10 text-slate-500" />
                    )}
                  </div>
                  <h2 className="text-2xl font-bold mb-2">
                    {gameState === 'victory' ? 'å‚³èªªé”æˆï¼' : 'å†æ¥å†å²ï¼'}
                  </h2>
                  <p className="text-slate-500 mb-6">
                    æœ€çµ‚åˆ†æ•¸: <span className="font-bold text-indigo-600 text-xl">{score}</span>
                  </p>
                  <button 
                    onClick={() => setGameState('menu')}
                    className="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-6 rounded-xl transition-all"
                  >
                    å›åˆ°ä¸»é¸å–®
                  </button>
                </div>
              </div>
            );
          }

          const currentQ = shuffledQuestions[currentQuestionIndex];
          if (!currentQ) return <div className="min-h-screen flex items-center justify-center">Loading Data...</div>;

          return (
            <div className={`min-h-screen bg-slate-50 flex flex-col p-4 font-sans overflow-hidden ${shake ? 'animate-shake' : ''}`}>
              <header className="max-w-xl mx-auto w-full mb-6 flex justify-between items-center bg-white p-3 rounded-xl shadow-sm border border-slate-100">
                <div className="flex items-center gap-2">
                  <Star className="w-5 h-5 text-yellow-500 fill-current" />
                  <span className="font-bold text-slate-700">{score}</span>
                </div>
                <div className="flex items-center gap-2">
                  <span className="text-xs font-bold text-slate-400">COMBO</span>
                  <span className={`font-black text-xl ${combo > 2 ? 'text-orange-500' : 'text-slate-300'}`}>{combo}</span>
                </div>
                <button onClick={() => setGameState('menu')} className="p-2 hover:bg-slate-100 rounded-lg text-slate-400">
                  <RefreshCw className="w-4 h-4" />
                </button>
              </header>

              <div className="flex-1 max-w-xl mx-auto w-full flex flex-col gap-6">
                <div className="bg-gradient-to-b from-indigo-50 to-white rounded-2xl p-6 shadow-md border border-indigo-100 relative min-h-[200px] flex items-end justify-between">
                    <div className={`flex flex-col items-center transition-transform duration-200 ${isMonsterAttacking ? '-translate-x-10 scale-110' : ''} ${feedback === 'correct' ? 'opacity-50 scale-90 filter grayscale' : ''}`}>
                        <div className="text-6xl mb-2 transition-all transform duration-300">
                            {monsterAvatars[(currentMonsterLevel - 1) % monsterAvatars.length]}
                        </div>
                        <div className="w-24">
                           <HealthBar current={monsterHp} max={maxMonsterHp} color="bg-red-500" label={`Lv.${currentMonsterLevel}`} /> 
                        </div>
                    </div>

                    <div className={`flex flex-col items-center transition-transform duration-100 ${isPlayerAttacking ? 'translate-x-10 -translate-y-5 scale-110' : ''} ${feedback === 'wrong' ? 'opacity-50' : ''}`}>
                        <div className="text-6xl mb-2">ğŸ¦¸</div>
                         <div className="w-24">
                           <HealthBar current={playerHp} max={maxPlayerHp} color="bg-green-500" label="Hero" /> 
                        </div>
                    </div>

                    {isPlayerAttacking && <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-4xl animate-ping">ğŸ’¥</div>}
                    {isMonsterAttacking && <div className="absolute bottom-10 right-1/3 text-4xl animate-bounce">ğŸ”¥</div>}
                </div>

                <div className="bg-white rounded-2xl shadow-lg border-b-4 border-indigo-100 p-6 text-center relative overflow-hidden">
                  <div className="absolute top-0 left-0 w-full h-1 bg-indigo-500"></div>
                  
                  {gameState === 'playing_battle' ? (
                      <>
                        <h2 className="text-4xl font-black text-slate-800 mb-6 break-words">{currentQ.word}</h2>
                      </>
                  ) : (
                      <div className="mb-6">
                        <div className="text-sm font-bold text-slate-400 mb-2 uppercase tracking-wide">Missing Rune</div>
                        <h2 className="text-4xl font-black text-slate-800 tracking-widest font-mono break-words mb-2">
                            {currentFillQuestion ? currentFillQuestion.maskedWord : ''}
                        </h2>
                        
                        <button
                           onClick={() => speakWord(currentQ.word)}
                           className="mx-auto mb-4 flex items-center gap-2 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 px-4 py-2 rounded-full transition-colors"
                        >
                            <Volume2 className="w-5 h-5" />
                            <span className="text-sm font-bold">è½ç™¼éŸ³ (Listen)</span>
                        </button>

                        <p className="text-slate-500 text-sm mt-2 font-bold">{currentQ.meaning}</p>
                      </div>
                  )}

                  {!showExplanation ? (
                    <div className={`grid ${gameState === 'playing_fill' ? 'grid-cols-2 sm:grid-cols-4' : 'grid-cols-1'} gap-3`}>
                      {gameState === 'playing_battle' ? (
                          currentOptions.map((option, idx) => (
                            <button
                              key={idx}
                              onClick={() => handleAnswer(option)}
                              disabled={feedback !== null}
                              className={`
                                p-4 rounded-xl font-bold text-lg transition-all transform active:scale-95
                                ${selectedOption === option 
                                  ? (feedback === 'correct' ? 'bg-green-500 text-white shadow-green-200' : 'bg-red-500 text-white shadow-red-200')
                                  : 'bg-slate-50 text-slate-700 hover:bg-indigo-50 hover:text-indigo-600 border border-slate-200'
                                }
                                ${feedback !== null && option === currentQ.meaning && feedback === 'wrong' ? 'ring-2 ring-green-500 bg-green-50' : ''}
                              `}
                            >
                              {option}
                            </button>
                          ))
                      ) : (
                          currentFillQuestion && currentFillQuestion.fillOptions.map((option, idx) => (
                            <button
                                key={idx}
                                onClick={() => handleAnswer(option)}
                                disabled={feedback !== null}
                                className={`
                                    p-4 rounded-xl font-bold text-2xl font-mono transition-all transform active:scale-95
                                    ${selectedOption === option
                                    ? (feedback === 'correct' ? 'bg-green-500 text-white' : 'bg-red-500 text-white')
                                    : 'bg-slate-100 text-slate-800 hover:bg-orange-100 hover:text-orange-600 border-2 border-slate-200'
                                    }
                                    ${feedback !== null && option === currentFillQuestion.targetChar && feedback === 'wrong' ? 'ring-4 ring-green-400 border-green-400' : ''}
                                `}
                            >
                                {option}
                            </button>
                          ))
                      )}
                    </div>
                  ) : (
                    <div className="bg-red-50 rounded-xl p-5 border border-red-100 animate-fadeIn">
                      <div className="flex items-center gap-2 text-red-600 font-bold mb-2">
                        <AlertCircle className="w-5 h-5" />
                        <span>Oops! æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š</span>
                      </div>
                      <p className="text-xl font-bold text-slate-800 mb-4">
                          {gameState === 'playing_battle' ? currentQ.meaning : (
                              <span>
                                <span className="text-red-500">{currentFillQuestion.targetChar}</span> 
                                <span className="text-slate-400 ml-2">({currentQ.word})</span>
                              </span>
                          )}
                      </p>
                      
                      <button 
                        onClick={() => {
                           if (playerHp <= 0) {
                                setGameState('gameover');
                           } else {
                               nextQuestion();
                           }
                        }}
                        className="mt-4 w-full bg-slate-800 text-white font-bold py-3 rounded-xl hover:bg-slate-900"
                      >
                        ç¹¼çºŒæˆ°é¬¥
                      </button>
                    </div>
                  )}
                  
                  {feedback === 'correct' && (
                     <div className="mt-4 bg-green-50 p-4 rounded-lg border border-green-100 text-left animate-fadeIn">
                        <div className="flex items-center gap-2 mb-2">
                            <BookOpen className="w-4 h-4 text-green-600" />
                            <span className="text-xs font-bold text-green-600 uppercase">Correct!</span>
                        </div>
                        <p className="text-slate-700 italic">"{currentQ.word}" means {currentQ.meaning}</p>
                     </div>
                  )}
                </div>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
